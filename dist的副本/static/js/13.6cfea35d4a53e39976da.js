webpackJsonp([13],{QSRi:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("CCUp"),l={name:"companyManage",data:function(){return{companyList:[],query:{curPage:1,pageSize:10,id:"",name:"",status:"",charge:"",chargePhone:"",adrName:""},totelCount:1,companyStatus:[{id:1,name:"可用"},{id:2,name:"停用"}]}},created:function(){this.getCompanyList()},methods:{switchCompany:function(e,t){var a=this,l="";"on"===t?l="开启":"off"===t&&(l="停用"),this.$confirm("是否"+l+e.name,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.g)(e.id).then(function(t){a.getCompanyList(),a.$message({type:"success",message:e.name+"已"+l})})}).catch(function(){})},clearFilter:function(){this.query={curPage:1,pageSize:10,id:"",name:"",status:"",charge:"",chargePhone:"",adrName:""},this.getCompanyList()},handleFilter:function(){this.query.curPage=1,this.getCompanyList()},handleCurrentChange:function(e){this.query.curPage=e,this.getCompanyList()},getCompanyList:function(){var e=this;this.listLoading=!0,Object(n.e)(this.query).then(function(t){t.data?(e.companyList=t.data.companies,e.totelCount=t.data.tolCount,e.query.pageSize=t.data.pageSize,e.query.curPage=t.data.curPage):e.companyList=[],e.listLoading=!1}).catch(function(){e.listLoading=!1})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{"line-height":"32px"}},[e._v("\n              选项\n            ")])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{"text-align":"right"}},[a("router-link",{attrs:{to:{name:"companyAdd"}}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"}},[e._v("新增企业")])],1)],1)])],1)],1),e._v(" "),a("div",{staticClass:"filter-main"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("label",[e._v("企业编号：")]),e._v(" "),a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入企业编号"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.query.id,callback:function(t){e.$set(e.query,"id",t)},expression:"query.id"}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",[e._v("企业名称：")]),e._v(" "),a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入企业名称"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("label",[e._v("企业负责人：")]),e._v(" "),a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入企业法人"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.query.charge,callback:function(t){e.$set(e.query,"charge",t)},expression:"query.charge"}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",[e._v("负责人电话：")]),e._v(" "),a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入企业法人电话"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.query.chargePhone,callback:function(t){e.$set(e.query,"chargePhone",t)},expression:"query.chargePhone"}})],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("label",[e._v("所在地区：")]),e._v(" "),a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入所在地区"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.query.adrName,callback:function(t){e.$set(e.query,"adrName",t)},expression:"query.adrName"}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("label",[e._v("企业状态：")]),e._v(" "),a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择企业状态"},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},e._l(e.companyStatus,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.clearFilter}},[e._v("清空")])],1)])],1)],1)])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.companyList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index+1)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"企业编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"企业名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"adr",label:"所在地区",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"charge",label:"企业负责人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"chargePhone",label:"负责人电话",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"企业状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("div",[e._v("可用")]):e._e(),e._v(" "),2==t.row.status?a("div",[e._v("停用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"creatDate",label:"添加日期",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"shopNum",label:"分店数量",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"280px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"text-align":"left"}},[a("router-link",{attrs:{to:{name:"companyDetail",query:{id:t.row.id}}}},[a("el-button",{attrs:{size:"mini",type:"success",plain:""}},[e._v("详情")])],1),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){e.switchCompany(t.row,"off")}}},[e._v("停用")]):e._e(),e._v(" "),2==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){e.switchCompany(t.row,"on")}}},[e._v("开启")]):e._e(),e._v(" "),a("router-link",{attrs:{to:{name:"shopAdd",query:{id:t.row.id,name:t.row.name}}}},[a("el-button",{attrs:{size:"mini",type:"primary",plain:""}},[e._v("添加下级门店")])],1)],1)]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.query.curPage,"page-size":e.query.pageSize,layout:"total,prev, pager, next, jumper",total:e.totelCount},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var i=a("VU/8")(l,r,!1,function(e){a("d6fB")},"data-v-6bd22ed3",null);t.default=i.exports},d6fB:function(e,t,a){var n=a("k4uF");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("7f0e41e5",n,!0)},k4uF:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])}});