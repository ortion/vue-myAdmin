webpackJsonp([16],{MLdX:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"",""])},ch4n:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("u2ya"),i={name:"shopManage",data:function(){return{shopList:[],query:{curPage:1,pageSize:10,id:"",name:"",status:"",linkman:"",phone:""},totelCount:1,shopStatus:[{id:1,name:"可用"},{id:2,name:"关店"}]}},created:function(){this.getShopList()},methods:{delShop:function(t){var e=this;this.$confirm("是否确定删除"+t.name,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.b)(t.id).then(function(n){e.getShopList(),e.$message({type:"success",message:t.name+"已删除"})})}).catch(function(){})},switchShop:function(t,e){var n=this;"off"===e?this.$prompt("请填写临时关店原因:",'您确定需要临时关闭"'+t.name+'"？',{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"textarea",inputPattern:/\S/,inputErrorMessage:"内容不能为空"}).then(function(e){var i=e.value;i&&Object(a.f)(t.id,i).then(function(e){n.getShopList(),n.$message({type:"success",message:t.name+"已临时关店"})})}).catch(function(){}):"on"===e&&this.$confirm("确定需要取消临时关闭"+t.name,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.f)(t.id).then(function(e){n.getShopList(),n.$message({type:"success",message:t.name+"已取消临时关店"})})}).catch(function(){})},clearFilter:function(){this.query={curPage:1,pageSize:10,id:"",name:"",status:"",linkman:"",phone:""},this.getShopList()},handleFilter:function(){this.query.curPage=1,this.getShopList()},handleCurrentChange:function(t){this.query.curPage=t,this.getShopList()},getShopList:function(){var t=this;this.listLoading=!0,Object(a.e)(this.query).then(function(e){e.data?(t.shopList=e.data.shops,t.totelCount=e.data.tolCount,t.query.pageSize=e.data.pageSize,t.query.curPage=e.data.curPage):t.shopList=[],t.listLoading=!1}).catch(function(){t.listLoading=!1})}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-card",{attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("div",{staticStyle:{"line-height":"32px"}},[t._v("\n              选项\n            ")])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{staticStyle:{"text-align":"right"}},[n("router-link",{attrs:{to:{name:"shopAdd"}}},[n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"}},[t._v("新增门店")])],1)],1)])],1)],1),t._v(" "),n("div",{staticClass:"filter-main"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("label",[t._v("门店编号：")]),t._v(" "),n("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入企业编号"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.query.id,callback:function(e){t.$set(t.query,"id",e)},expression:"query.id"}})],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("label",[t._v("门店名称：")]),t._v(" "),n("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入企业名称"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.query.name,callback:function(e){t.$set(t.query,"name",e)},expression:"query.name"}})],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("label",[t._v("门店负责人：")]),t._v(" "),n("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入门店负责人"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.query.linkman,callback:function(e){t.$set(t.query,"linkman",e)},expression:"query.linkman"}})],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("label",[t._v("负责人电话：")]),t._v(" "),n("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入负责人电话"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleFilter(e)}},model:{value:t.query.phone,callback:function(e){t.$set(t.query,"phone",e)},expression:"query.phone"}})],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("label",[t._v("门店状态：")]),t._v(" "),n("el-select",{staticStyle:{width:"40%"},attrs:{placeholder:"请选择企业状态"},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},t._l(t.shopStatus,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("查询")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.clearFilter}},[t._v("清空")])],1)])],1)],1)])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.shopList,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index+1)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"门店编号",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"门店名称",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"linkman",label:"门店负责人",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"负责人电话",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"creatDate",label:"添加日期",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"",label:"绑定店员",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"门店状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?n("div",[t._v("可用")]):t._e(),t._v(" "),2==e.row.status?n("div",[t._v("关店")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"whyStop",label:"操作原因",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"350px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{"text-align":"left"}},[n("router-link",{attrs:{to:{name:"shopDetail",query:{id:e.row.id}}}},[n("el-button",{attrs:{size:"mini",type:"success",plain:""}},[t._v("详情")])],1),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(n){t.delShop(e.row)}}},[t._v("删除")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",plain:""}},[t._v("商品管理")]),t._v(" "),1==e.row.status?n("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(n){t.switchShop(e.row,"off")}}},[t._v("临时关店")]):t._e(),t._v(" "),2==e.row.status?n("el-button",{attrs:{size:"mini",type:"warning",plain:""},on:{click:function(n){t.switchShop(e.row,"on")}}},[t._v("取消临时关店")]):t._e()],1)]}}])})],1),t._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{"current-page":t.query.curPage,"page-size":t.query.pageSize,layout:"total,prev, pager, next, jumper",total:t.totelCount},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var r=n("VU/8")(i,l,!1,function(t){n("qykz")},"data-v-618cd281",null);e.default=r.exports},qykz:function(t,e,n){var a=n("MLdX");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("53f002e3",a,!0)}});