webpackJsonp([1],{"43jC":function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,'\n@charset "UTF-8";\n/* 图片库 */\n.photoGallery[data-v-c2b30f74] {\n  height: 350px;\n  margin-bottom: 15px;\n}\n.photoGallery-item[data-v-c2b30f74] {\n  display: inline-block;\n  position: relative;\n  width: 150px;\n  height: 150px;\n  background-position: center;\n  background-size: auto 100%;\n  margin: 0 15px 15px 0;\n  border-radius: 5px;\n  border: 5px solid #f7f5f5;\n}\n.photoGallery-operate[data-v-c2b30f74] {\n  position: absolute;\n  right: 8px;\n  top: 5px;\n  width: 15px;\n  overflow: hidden;\n}\n.photoGallery-operate i[data-v-c2b30f74] {\n  color: #39f778;\n}\n.photobotton[data-v-c2b30f74] {\n  display: inline-block;\n}\n.nodata[data-v-c2b30f74] {\n  text-align: center;\n  min-height: 80px;\n}\n',""])},"D/5c":function(t,n,e){t.exports=e.p+"static/img/timg.0565ac1.jpeg"},D0VA:function(t,n,e){var a=e("GN9P");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("6694987a",a,!0)},ENyF:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("Dd8w"),i=e.n(a),s=e("D/5c"),o=e.n(s),c=e("7Otq"),l=e.n(c),r=e("vLgD"),d=e("TIfe");var p=e("NYxO"),u={name:"preview",computed:i()({},Object(p.b)(["updatebannerStatus","updateiconStatus"])),data:function(){return{exmple:o.a,logo:l.a,bannerList:[],iconList:[],showStatus:"banner"}},watch:{updatebannerStatus:function(){this.updatebannerStatus&&this.getAppbannerList()},updateiconStatus:function(){this.updateiconStatus&&this.getAppIconList()}},created:function(){this.getAppbannerList(),this.getAppIconList()},methods:{goChange:function(t){this.showStatus="banner"===t?t:t.id,this.$emit("openStatus",t)},getAppbannerList:function(){var t=this;Object(r.a)({url:"app/banner/load",method:"POST",data:{token:Object(d.a)()}}).then(function(n){t.bannerList=n.data,t.$store.commit("SET_BANNERLIST",t.bannerList)})},getAppIconList:function(){var t=this;Object(r.a)({url:"app/palace/load",method:"POST",data:{token:Object(d.a)()}}).then(function(n){t.iconList=n.data})}}},h={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"App-carousel"},[e("div",{staticClass:"border",class:{"editing-status":"banner"==t.showStatus},on:{click:function(n){t.goChange("banner")}}},[t.bannerList.length>0?e("el-carousel",{attrs:{interval:5e3,arrow:"never",height:"180px",autoplay:!1}},t._l(t.bannerList,function(t){return e("el-carousel-item",{key:t.id},[e("img",{attrs:{src:t.imageUrl,alt:""}})])})):e("img",{attrs:{src:t.exmple,alt:""}})],1),t._v(" "),e("div",{staticClass:"icon-manage"},[e("el-row",t._l(t.iconList,function(n){return e("el-col",{key:n.id,staticClass:"border",class:{"editing-status":t.showStatus==n.id},attrs:{span:6}},[e("div",{staticClass:"grid-content",on:{click:function(e){t.goChange(n)}}},[n.picUrl?e("img",{attrs:{src:n.picUrl,alt:""}}):e("img",{attrs:{src:t.logo,alt:""}}),t._v(" "),e("p",[t._v(t._s(n.name))])])])}))],1),t._v(" "),e("div",{staticClass:"recommend"},[e("div",{staticClass:"card-header clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("推荐商家")])]),t._v(" "),e("div",{staticClass:"business-list"},[e("div",{staticClass:"media"},[e("div",{staticClass:"media-left"},[e("a",{attrs:{href:"#"}},[e("img",{attrs:{src:t.logo,alt:""}})])]),t._v(" "),t._m(0)])])])])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"media-body"},[n("h4",{staticClass:"media-heading"},[this._v("Media heading")]),this._v("\n          信息\n        ")])}]};var g=e("VU/8")(u,h,!1,function(t){e("Rxdc")},"data-v-12483d82",null).exports,f=e("Prlc"),b=e("pXKa"),m={name:"bannerManage",components:{PhotoAlbum:f.a},computed:i()({},Object(p.b)(["bannerlist"])),data:function(){return{exmple:o.a,loading:!1,listLoading:!1,isImgDialog:!1,bannerUpdateList:[],backgroundDiv:{},picList:[],isCloseStatus:!1,selectEditIndex:Number}},watch:{bannerlist:function(){var t=[];this.bannerlist.forEach(function(n){t.push({imageUrl:n.imageUrl,linkUrl:n.linkUrl})}),this.bannerUpdateList=t}},methods:{onSave:function(){var t,n=this;this.bannerUpdateList.length>0?(this.loading=!0,this.bannerUpdateList.forEach(function(t,e){n.$set(t,"id",e)}),(t=this.bannerUpdateList,Object(r.a)({url:"app/banner/update",method:"POST",data:{token:Object(d.a)(),data:t}})).then(function(t){n.loading=!1,n.$message({type:"success",message:"保存成功!"}),n.$store.commit("UPDATEBANNER_STATUS",!0)}).catch(function(){n.loading=!1})):this.$message({type:"warning",message:"您未添加banner图!"})},selectImg:function(t){this.isImgDialog=!1,t&&(this.bannerUpdateList[this.selectEditIndex].imageUrl=t)},updateData:function(t){t&&this.getPicList()},getPicList:function(){var t=this;this.listLoading=!0,Object(b.d)().then(function(n){var e=n.data;t.picList=e.reverse(),t.listLoading=!1}).catch(function(){t.listLoading=!1})},openImgs:function(t){this.selectEditIndex=t,this.isImgDialog=!0,this.getPicList()},addBanner:function(){this.bannerUpdateList.length>5||this.bannerUpdateList.push({imageUrl:o.a,linkUrl:""})},deleteBanner:function(t){this.bannerUpdateList.splice(t,1)},upTr:function(t){0!==t&&(this.bannerUpdateList[t]=this.bannerUpdateList.splice(t-1,1,this.bannerUpdateList[t])[0])},downTr:function(t){t!==this.bannerUpdateList.length-1&&(this.bannerUpdateList[t]=this.bannerUpdateList.splice(t+1,1,this.bannerUpdateList[t])[0])}}},v={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("h3",[t._v("banner管理")]),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.bannerUpdateList}},[e("el-table-column",{attrs:{label:"图片地址"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("div",{staticClass:"picture-img",on:{click:function(e){t.openImgs(n.$index)}}},[e("el-tag",{staticClass:"tag-button"},[t._v("编辑")]),t._v(" "),e("img",{attrs:{src:n.row.imageUrl}})],1)]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"链接地址"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-input",{attrs:{size:"small",placeholder:"请输入内容","suffix-icon":"el-icon-edit"},model:{value:n.row.linkUrl,callback:function(e){t.$set(n.row,"linkUrl","string"==typeof e?e.trim():e)},expression:"scope.row.linkUrl"}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"操作",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("div",{staticStyle:{"text-align":"left"}},[e("el-button",{attrs:{size:"mini",disabled:0==n.$index,type:"success",plain:""},on:{click:function(e){t.upTr(n.$index)}}},[t._v("上移")]),t._v(" "),e("el-button",{attrs:{size:"mini",disabled:n.$index==t.bannerUpdateList.length-1,type:"success",plain:""},on:{click:function(e){t.downTr(n.$index)}}},[t._v("下移")]),t._v(" "),e("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(e){t.deleteBanner(n.$index)}}},[t._v("删除")])],1)]}}])})],1),t._v(" "),e("div",{staticClass:"add-button"},[e("el-button",{attrs:{disabled:this.bannerUpdateList.length>5,size:"small",type:"primary",plain:""},on:{click:t.addBanner}},[t._v("添加")]),t._v(" "),e("span",{staticClass:"tipMessage"},[t._v("(最多只能添加6组)")])],1),t._v(" "),e("div",{staticClass:"save-button"},[e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onSave}},[t._v("保存")])],1),t._v(" "),e("el-dialog",{attrs:{title:"图片库",visible:t.isImgDialog},on:{"update:visible":function(n){t.isImgDialog=n},close:function(n){t.isCloseStatus=!0},open:function(n){t.isCloseStatus=!1}}},[e("photo-album",{attrs:{photoType:"banner",photoList:t.picList,closeDialog:t.isCloseStatus,listLoading:t.listLoading},on:{updatedata:t.updateData,selectImg:t.selectImg}})],1)],1)},staticRenderFns:[]};var x=e("VU/8")(m,v,!1,function(t){e("ns8i")},"data-v-44692fde",null).exports,L={name:"iconManage",components:{PhotoAlbum:f.a},props:["nowIcon"],data:function(){return{logo:l.a,loading:!1,listLoading:!1,imageUrl:"",isPhotosDialog:!1,picList:[],isCloseStatus:!1,updateIcon:{id:"",picUrl:""}}},watch:{nowIcon:function(){this.updateIcon.id=this.nowIcon.id,this.updateIcon.picUrl=this.nowIcon.picUrl}},methods:{onSave:function(){var t,n=this;this.loading=!0,(t=this.updateIcon,Object(r.a)({url:"app/palace/update",method:"POST",data:{token:Object(d.a)(),data:t}})).then(function(t){n.loading=!1,n.$message({type:"success",message:"保存成功!"}),n.$store.commit("UPDATEICON_STATUS",!0)}).catch(function(){n.loading=!1})},returnPhone:function(){this.updateIcon.picUrl=this.nowIcon.picUrl},openPhotos:function(){this.isPhotosDialog=!0,this.getPicList()},getPicList:function(){var t=this;this.listLoading=!0,Object(b.e)().then(function(n){var e=n.data;t.picList=e.reverse(),t.listLoading=!1}).catch(function(){t.listLoading=!1})},selectImg:function(t){this.isPhotosDialog=!1,this.updateIcon.picUrl=t||this.nowIcon.picUrl},updateData:function(t){t&&this.getPicList()}}},_={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("h3",[t._v("宫格管理")]),t._v(" "),e("div",{staticClass:"preview-img"},[t.updateIcon.picUrl?e("img",{staticClass:"avatar",attrs:{src:t.updateIcon.picUrl}}):e("img",{staticClass:"avatar",attrs:{src:t.logo}})]),t._v(" "),e("div",{staticClass:"avatar-uploader",on:{click:t.openPhotos}},[e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),e("div",{staticClass:"submit-button"},[e("el-button",{attrs:{type:"info",plain:""},on:{click:t.returnPhone}},[t._v("还原")]),t._v(" "),e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onSave}},[t._v("确认")])],1),t._v(" "),e("el-dialog",{attrs:{title:"图片库",visible:t.isPhotosDialog},on:{"update:visible":function(n){t.isPhotosDialog=n},close:function(n){t.isCloseStatus=!0},open:function(n){t.isCloseStatus=!1}}},[e("photo-album",{attrs:{photoType:"icon",photoList:t.picList,closeDialog:t.isCloseStatus,listLoading:t.listLoading},on:{updatedata:t.updateData,selectImg:t.selectImg}})],1)],1)},staticRenderFns:[]};var y={name:"APPindexManage",components:{preview:g,bannerManage:x,iconManage:e("VU/8")(L,_,!1,function(t){e("zchT")},"data-v-25fde9f6",null).exports},data:function(){return{opening:"banner",nowIcon:""}},methods:{openStatus:function(t){"banner"===t?this.opening=t:(this.opening="icon",this.nowIcon=t)}}},k={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:9}},[n("preview",{on:{openStatus:this.openStatus}})],1),this._v(" "),n("el-col",{attrs:{span:15}},[n("div",{staticClass:"app-manage"},[n("banner-manage",{directives:[{name:"show",rawName:"v-show",value:"banner"==this.opening,expression:"opening=='banner'"}]}),this._v(" "),n("icon-manage",{directives:[{name:"show",rawName:"v-show",value:"icon"==this.opening,expression:"opening=='icon'"}],attrs:{"now-icon":this.nowIcon}})],1)])],1)],1)},staticRenderFns:[]};var U=e("VU/8")(y,k,!1,function(t){e("D0VA")},"data-v-01ab327d",null);n.default=U.exports},G8ro:function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,'\n@charset "UTF-8";\n.App-carousel[data-v-12483d82] {\n  max-width: 350px;\n  background: #f1f1f1;\n}\n.icon-manage[data-v-12483d82] {\n  margin-top: 10px;\n}\n.grid-content[data-v-12483d82] {\n  width: 100%;\n  padding-bottom: 100%;\n  /* padding百分比相对父元素宽度计算 */\n  height: 0;\n  overflow: hidden;\n  text-align: center;\n  font-size: 12px;\n  background: #ffffff;\n}\n.grid-content img[data-v-12483d82] {\n    width: 45px;\n    height: 45px;\n    margin: 10px auto;\n}\n.recommend[data-v-12483d82] {\n  margin-top: 10px;\n  background: #ffffff;\n}\n.card-header[data-v-12483d82] {\n  padding: 10px;\n}\n.business-list[data-v-12483d82] {\n  padding: 5px;\n}\n.business-list .media[data-v-12483d82] {\n    margin-bottom: 10px;\n    padding: 5px;\n    border-bottom: 1px solid #f6f6f6;\n}\n.media-body[data-v-12483d82],\n.media-left[data-v-12483d82],\n.media-right[data-v-12483d82] {\n  display: table-cell;\n  vertical-align: top;\n}\n.border[data-v-12483d82] {\n  border: 3px solid #ffffff;\n}\n.editing-status[data-v-12483d82] {\n  border: 3px solid #4823ee;\n  position: relative;\n}\n.editing-button[data-v-12483d82] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 4;\n}\n',""])},GN9P:function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.app-manage[data-v-01ab327d] {\n  border: solid 1px #e6e6e6;\n  padding: 10px 20px;\n}\n",""])},M2q1:function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.picture-img[data-v-44692fde] {\n  position: relative;\n  cursor: pointer;\n}\n.picture-img .tag-button[data-v-44692fde] {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    background-color: rgba(255, 255, 255, 0.8);\n}\n.picture-img img[data-v-44692fde] {\n    width: 150px;\n    height: 80px;\n}\n.add-button[data-v-44692fde] {\n  padding: 10px;\n  text-align: left;\n}\n.save-button[data-v-44692fde] {\n  padding: 10px;\n  border-top: solid 1px #e6e6e6;\n  text-align: center;\n}\n",""])},Prlc:function(t,n,e){"use strict";var a=e("pXKa"),i=e("xuzd"),s={props:["photoType","photoList","closeDialog"],watch:{closeDialog:function(t){t&&(this.checkedImg=[],this.isIndex=-1,this.isDeleteStatus=!1)}},data:function(){return{listLoading:!1,fileList:[],checkedImg:[],isDeleteStatus:!1,isIndex:-1,selectImgUrl:"",loading:!1}},methods:{submitPhoto:function(){this.$emit("selectImg",this.selectImgUrl)},selectPhoto:function(t,n){this.isIndex=n,this.selectImgUrl=t.imageUrl},Upload:function(t){var n=this,e="";"banner"===this.photoType?e="banner"+t.file.uid:"icon"===this.photoType?e="icon"+t.file.uid:"shop"===this.photoType&&(e="shop"+t.file.uid),this.loading=!0,this.listLoading=!0,Object(i.a)().put(e,t.file).then(function(t){n.fileList[0]={name:t.name,url:t.url},"banner"===n.photoType?Object(a.g)(n.fileList).then(function(t){n.$emit("updatedata",!0)}):"icon"===n.photoType?Object(a.h)(n.fileList).then(function(t){n.$emit("updatedata",!0)}):"shop"===n.photoType&&Object(a.i)(n.fileList).then(function(t){n.$emit("updatedata",!0)}),n.loading=!1,n.listLoading=!1}).catch(function(t){console.log(t),n.loading=!1,n.listLoading=!1})},DeletePhoto:function(){var t=this,n=[];this.checkedImg.length>0?(this.checkedImg.forEach(function(t){n.push({url:t})}),"banner"===this.photoType?Object(a.a)(n).then(function(n){t.$message({type:"success",message:"删除成功!"}),t.checkedImg=[],t.$emit("updatedata",!0)}):"icon"===this.photoType?Object(a.b)(n).then(function(n){t.$message({type:"success",message:"删除成功!"}),t.checkedImg=[],t.$emit("updatedata",!0)}):"shop"===this.photoType&&Object(a.c)(n).then(function(n){t.$message({type:"success",message:"删除成功!"}),t.checkedImg=[],t.$emit("updatedata",!0)})):this.$message({type:"warning",message:"您未选择要删除的图片!"})},handleChange:function(t){this.checkedImg=t}}},o={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}]},[t.photoList.length<=0?e("div",{staticClass:"nodata"},[t._v("\n    暂无图片\n  ")]):e("div",{staticClass:"photoGallery"},[e("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.photoList,function(n,a){return e("div",{key:a,staticClass:"photoGallery-item",style:"background-image: url("+n.imageUrl+")",on:{click:function(e){t.selectPhoto(n,a)}}},[e("div",{staticClass:"photoGallery-operate"},[t.isDeleteStatus||a!=t.isIndex?t._e():e("i",{staticClass:"el-icon-success"}),t._v(" "),t.isDeleteStatus?e("el-checkbox-group",{on:{change:t.handleChange},model:{value:t.checkedImg,callback:function(n){t.checkedImg=n},expression:"checkedImg"}},[e("el-checkbox",{attrs:{label:n.imageUrl}})],1):t._e()],1)])}))],1),t._v(" "),e("div",{staticClass:"photobotton"},[t.isDeleteStatus?t._e():e("div",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){t.isDeleteStatus=!0}}},[t._v("删除")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitPhoto}},[t._v("确定")])],1),t._v(" "),t.isDeleteStatus?e("div",[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.DeletePhoto}},[t._v("批量删除")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){t.isDeleteStatus=!1}}},[t._v("取消")])],1):t._e()]),t._v(" "),e("div",{staticClass:"photobotton",staticStyle:{float:"right"}},[e("el-upload",{attrs:{"http-request":t.Upload,multiple:!0,"show-file-list":!1,action:""}},[e("el-button",{attrs:{size:"small",type:"primary",loading:t.loading}},[t._v("点击上传")])],1)],1)])},staticRenderFns:[]};var c=e("VU/8")(s,o,!1,function(t){e("lQ3k")},"data-v-c2b30f74",null);n.a=c.exports},Rxdc:function(t,n,e){var a=e("G8ro");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("5a342e77",a,!0)},TPIl:function(t,n,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.avatar-uploader[data-v-25fde9f6] {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  width: 250px;\n  height: 250px;\n  margin: 0 auto;\n}\n.avatar-uploader[data-v-25fde9f6]:hover {\n    border-color: #409eff;\n}\n.avatar-uploader-icon[data-v-25fde9f6] {\n  font-size: 28px;\n  color: #8c939d;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.preview-img[data-v-25fde9f6] {\n  width: 100px;\n  height: 100px;\n  margin-bottom: 15px;\n}\n.avatar[data-v-25fde9f6] {\n  border-radius: 50%;\n  width: 100px;\n  height: 100px;\n}\n.submit-button[data-v-25fde9f6] {\n  padding: 15px 0;\n  text-align: center;\n}\n",""])},lQ3k:function(t,n,e){var a=e("43jC");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("2faf492c",a,!0)},ns8i:function(t,n,e){var a=e("M2q1");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("dc7eab28",a,!0)},pXKa:function(t,n,e){"use strict";n.d=function(){return Object(a.a)({url:"app/banner/picload",method:"POST",data:{token:Object(i.a)()}})},n.g=function(t){return Object(a.a)({url:"app/banner/picupload",method:"POST",data:{token:Object(i.a)(),picList:t}})},n.a=function(t){return Object(a.a)({url:"app/banner/picdelete",method:"POST",data:{token:Object(i.a)(),picList:t}})},n.e=function(){return Object(a.a)({url:"app/palace/picload",method:"POST",data:{token:Object(i.a)()}})},n.h=function(t){return Object(a.a)({url:"app/palace/picupload",method:"POST",data:{token:Object(i.a)(),picList:t}})},n.b=function(t){return Object(a.a)({url:"app/palace/picdelete",method:"POST",data:{token:Object(i.a)(),picList:t}})},n.f=function(){return Object(a.a)({url:"base/picload",method:"POST",data:{token:Object(i.a)(),type:6}})},n.i=function(t){return Object(a.a)({url:"base/picupload",method:"POST",data:{token:Object(i.a)(),type:6,picList:t}})},n.c=function(t){return Object(a.a)({url:"base/picdelete",method:"POST",data:{token:Object(i.a)(),picList:t}})};var a=e("vLgD"),i=e("TIfe")},zchT:function(t,n,e){var a=e("TPIl");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("616697e8",a,!0)}});