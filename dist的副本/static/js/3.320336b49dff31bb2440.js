webpackJsonp([3],{GFir:function(t,e,i){var n=i("sxM7");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("054f7e55",n,!0)},Hdkc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=[{authSign:"1",title:"首页",children:[{authSign:"1-3",title:"设置",children:[{authSign:"1-3-3",title:"接单设置"}]}]},{authSign:"2",title:"门店",children:[{authSign:"2-1",title:"企业管理",children:[{authSign:"2-1-1",title:"查询"},{authSign:"2-1-2",title:"新建企业"},{authSign:"2-1-3",title:"企业详情"},{authSign:"2-1-4",title:"开启/停用"},{authSign:"2-1-5",title:"添加下级门店"}]},{authSign:"2-2",title:"门店管理",children:[{authSign:"2-2-1",title:"查询"},{authSign:"2-2-2",title:"新建门店"},{authSign:"2-2-3",title:"详情"},{authSign:"2-2-4",title:"删除"},{authSign:"2-2-5",title:"临时关店/开启"},{authSign:"2-2-6",title:"商品管理"}]},{authSign:"2-3",title:"员工管理",children:[{authSign:"2-3-1",title:"查询"},{authSign:"2-3-2",title:"新增员工"},{authSign:"2-3-3",title:"详情"},{authSign:"2-3-4",title:"删除"}]},{authSign:"2-4",title:"店面装饰",children:[{authSign:"2-4-1",title:"广告图管理"},{authSign:"2-4-2",title:"基本信息管理"}]},{authSign:"2-5",title:"门店储值卡管理",children:[{authSign:"2-5-1",title:"查询"},{authSign:"2-5-2",title:"新建储值卡"},{authSign:"2-5-3",title:"详情"},{authSign:"2-5-4",title:"删除"}]},{authSign:"2-6",title:"门店营销管理",children:[{authSign:"2-6-1",title:"查询"},{authSign:"2-6-2",title:"新增营销活动"},{authSign:"2-6-3",title:"删除"},{authSign:"2-6-4",title:"提交审核"},{authSign:"2-6-5",title:"修改"},{authSign:"2-6-6",title:"发布"}]},{authSign:"2-7",title:"门店营销审核",children:[{authSign:"2-7-1",title:"查询"},{authSign:"2-7-2",title:"详情"},{authSign:"2-7-3",title:"审核"},{authSign:"2-7-4",title:"提交复核"},{authSign:"2-7-5",title:"强制下架/上架"}]},{authSign:"2-8",title:"门店营销复核",children:[{authSign:"2-8-1",title:"详情"},{authSign:"2-8-2",title:"复核"},{authSign:"2-8-3",title:"强制下架/发布"}]},{authSign:"2-9",title:"企业类型管理",children:[{authSign:"2-9-1",title:"新增"},{authSign:"2-9-2",title:"修改"},{authSign:"2-9-3",title:"删除"}]}]},{authSign:"3",title:"商品",children:[{authSign:"3-1",title:"商品管理",children:[{authSign:"3-1-1",title:"查询"},{authSign:"3-1-2",title:"新建商品"},{authSign:"3-1-3",title:"（批量）上架/下架"},{authSign:"3-1-4",title:"提交审核"},{authSign:"3-1-5",title:"删除"},{authSign:"3-1-6",title:"提醒审核"}]},{authSign:"3-2",title:"商品审核",children:[{authSign:"3-2-1",title:"查询"},{authSign:"3-2-2",title:"下架/启用"},{authSign:"3-2-3",title:"停用"},{authSign:"3-2-4",title:"审核"}]},{authSign:"3-3",title:"商品分类",children:[{authSign:"3-3-1",title:"新建分类"},{authSign:"3-3-2",title:"修改"},{authSign:"3-3-3",title:"删除"}]}]},{authSign:"4",title:"会员",children:[{authSign:"4-1",title:"会员管理",children:[{authSign:"4-1-1",title:"查询"},{authSign:"4-1-2",title:"新增会员"},{authSign:"4-1-3",title:"修改"},{authSign:"4-1-4",title:"删除"},{authSign:"4-1-5",title:"详情"}]},{authSign:"4-2",title:"会员营销",children:[{authSign:"4-2-1",title:"查询"},{authSign:"4-2-2",title:"新建会员营销"},{authSign:"4-2-3",title:"开启/关闭"},{authSign:"4-2-4",title:"修改"},{authSign:"4-2-5",title:"删除"}]},{authSign:"4-3",title:"宠物管理",children:[{authSign:"4-3-1",title:"查询"},{authSign:"4-3-2",title:"新增宠物"},{authSign:"4-3-3",title:"修改"},{authSign:"4-3-4",title:"删除"},{authSign:"4-3-5",title:"详情"}]}]},{authSign:"5",title:"营销",children:[{authSign:"5-1",title:"营销管理",children:[{authSign:"5-1-1",title:"查询"},{authSign:"5-1-2",title:"新建营销活动"},{authSign:"5-1-3",title:"发布/下架"},{authSign:"5-1-4",title:"修改"},{authSign:"5-1-5",title:"删除"},{authSign:"5-1-6",title:"提交审核"}]},{authSign:"5-2",title:"营销审核",children:[{authSign:"5-2-1",title:"查询"},{authSign:"5-2-2",title:"详情"},{authSign:"5-2-3",title:"审核"}]},{authSign:"5-3",title:"积分兑换管理",children:[{authSign:"5-3-1",title:"新增积分兑换规则"},{authSign:"5-3-2",title:"详情"},{authSign:"5-3-3",title:"上架/下架"},{authSign:"5-3-4",title:"删除"}]},{authSign:"5-4",title:"会员积分列表",children:[{authSign:"5-4-1",title:"查询"},{authSign:"5-4-2",title:"详情"}]},{authSign:"5-5",title:"营销领取列表",children:[{authSign:"5-5-1",title:"查询"},{authSign:"5-5-2",title:"详情"}]},{authSign:"5-6",title:"门店营销汇总表",children:[{authSign:"5-6-1",title:"查询"},{authSign:"5-6-2",title:"详情"}]}]},{authSign:"6",title:"订单",children:[{authSign:"6-1",title:"全部订单",children:[{authSign:"6-1-1",title:"查询"},{authSign:"6-1-2",title:"新增订单"},{authSign:"6-1-3",title:"详情"},{authSign:"6-1-4",title:"删除"},{authSign:"6-1-5",title:"修改"},{authSign:"6-1-6",title:"作废"},{authSign:"6-1-7",title:"接单/无法接单"}]},{authSign:"6-2",title:"退货订单",children:[{authSign:"6-2-1",title:"查询"},{authSign:"6-2-2",title:"通过/不通过"},{authSign:"6-2-3",title:"修改（不通过后）"}]},{authSign:"6-3",title:"作废订单",children:[{authSign:"6-3-1",title:"查询"},{authSign:"6-3-2",title:"详情"},{authSign:"6-3-3",title:"修改"}]}]},{authSign:"7",title:"消息",children:[{authSign:"7-1",title:"发送消息",children:[{authSign:"7-1-1",title:"查询"},{authSign:"7-1-2",title:"新增消息"},{authSign:"7-1-3",title:"修改"},{authSign:"7-1-4",title:"提交审核"},{authSign:"7-1-5",title:"发布"}]},{authSign:"7-2",title:"消息发送审核",children:[{authSign:"7-2-1",title:"查询"},{authSign:"7-2-2",title:"详情"},{authSign:"7-2-3",title:"审核"},{authSign:"7-2-4",title:"修改"}]},{authSign:"7-3",title:"接收消息列表",children:[{authSign:"7-3-1",title:"查询"},{authSign:"7-3-2",title:"详情"},{authSign:"7-3-3",title:"删除"}]}]},{authSign:"8",title:"系统",children:[{authSign:"8-1",title:"热门地址管理",children:[{authSign:"8-1-1",title:"增加地址"},{authSign:"8-1-2",title:"上移/下移"},{authSign:"8-1-3",title:"删除"},{authSign:"8-1-4",title:"修改"}]},{authSign:"8-2",title:"热搜管理",children:[{authSign:"8-2-1",title:"增加热搜词"},{authSign:"8-2-2",title:"上移/下移"},{authSign:"8-2-3",title:"删除"},{authSign:"8-2-4",title:"修改"}]},{authSign:"8-3",title:"APP首页管理",children:[{authSign:"8-3-1",title:"banner管理"},{authSign:"8-3-2",title:"宫格icon管理"},{authSign:"8-3-3",title:"商户推荐管理"}]},{authSign:"8-4",title:"优惠券发布",children:[{authSign:"8-4-1",title:"添加广告"},{authSign:"8-4-2",title:"添加优惠券"},{authSign:"8-4-3",title:"预览"},{authSign:"8-4-4",title:"上移/下移"},{authSign:"8-4-5",title:"修改"},{authSign:"8-4-6",title:"删除"}]},{authSign:"8-5",title:"权限管理",children:[{authSign:"8-5-1",title:"添加角色"},{authSign:"8-5-2",title:"分配"},{authSign:"8-5-3",title:"修改"},{authSign:"8-5-4",title:"删除"}]},{authSign:"8-6",title:"操作日志",children:[{authSign:"8-6-1",title:"查询"},{authSign:"8-6-2",title:"详情"}]}]}];var a={name:"PermissionTree",props:{dataList:{type:[Array,Object],required:!0}},data:function(){return{checkedID:["1"],activeName:[],disabledList:["2-1-1","2-1-3","2-2-1","2-2-3","2-3-1","2-3-3","2-5-1","2-5-3","2-6-1","2-7-1","2-7-2","2-8-1","3-1-1","3-2-1","4-1-1","4-1-5","4-2-1","4-3-1","4-3-5","5-1-1","5-2-1","5-2-2","5-3-2","5-4-1","5-4-2","5-5-1","5-5-2","5-6-1","5-6-2","6-1-1","6-1-3","6-2-1","6-3-1","6-3-2","7-1-1","7-2-1","7-2-2","7-3-1","7-3-2","7-3-3","8-4-3","8-6-1","8-6-2"]}},watch:{dataList:function(){var t=this;this.dataList.map(function(e){e.isSelect&&(t.checkedID.push(e.authSign),e.children.map(function(e){e.isSelect&&(t.checkedID.push(e.authSign),e.children.map(function(e){e.isSelect&&t.checkedID.push(e.authSign)}))}))})}},methods:{isMapName:function(t,e){var i=parseInt(e.slice(0)),a=void 0;return 1===t?n.map(function(t){e===t.authSign&&(a=t.title)}):2===t?n[i-1].children.map(function(t){e===t.authSign&&(a=t.title)}):3===t&&n[i-1].children.map(function(t){var i=e.lastIndexOf("-");e.substring(0,i)===t.authSign&&t.children.map(function(t){e===t.authSign&&(a=t.title)})}),a},handleChange:function(t){this.checkedID=t,this.$emit("checkedID",this.checkedID)},checkboxInit:function(t){return!(this.disabledList.indexOf(t)<0)},checkFirstAll:function(t){var e=this;this.activeName.push(t.authSign),t.isSelect=!t.isSelect,t.isSelect?t.children.forEach(function(t){t.isSelect=!0,e.checkedID.indexOf(t.authSign)<0&&e.checkedID.push(t.authSign),t.children.forEach(function(t){t.isSelect=!0,e.checkedID.indexOf(t.authSign)<0&&e.checkedID.push(t.authSign)})}):t.children.forEach(function(t){t.isSelect=!1,e.checkedID.indexOf(t.authSign)>=0&&e.checkedID.splice(e.checkedID.indexOf(t.authSign),1),t.children.forEach(function(t){t.isSelect=!1,e.checkedID.indexOf(t.authSign)>=0&&e.checkedID.splice(e.checkedID.indexOf(t.authSign),1)})})},checkSecondAll:function(t,e){var i=this;t.isSelect=!t.isSelect,t.isSelect?(e.isSelect=!0,this.checkedID.indexOf(e.authSign)<0&&this.checkedID.push(e.authSign),t.children.forEach(function(t){t.isSelect=!0,i.checkedID.indexOf(t.authSign)<0&&i.checkedID.push(t.authSign)})):(this.FilterId(e)||e.isSelect&&(e.isSelect=!1,this.checkedID.splice(this.checkedID.indexOf(e.authSign),1)),t.children.forEach(function(t){t.isSelect&&(t.isSelect=!1,i.checkedID.indexOf(t.authSign)>=0&&i.checkedID.splice(i.checkedID.indexOf(t.authSign),1))}))},FilterId:function(t){var e=this;return t.children.some(function(t){return e.checkedID.indexOf(t.authSign)>=0})},checkthird:function(t,e,i){t.isSelect=!t.isSelect,t.isSelect?(e.isSelect=!0,i.isSelect=!0,this.checkedID.indexOf(e.authSign)<0&&this.checkedID.push(e.authSign),this.checkedID.indexOf(i.authSign)<0&&this.checkedID.push(i.authSign)):this.checkedID.indexOf(t.authSign)>=0&&this.checkedID.splice(this.checkedID.indexOf(t.authSign),1),this.FilterId(e)||e.isSelect&&(e.isSelect=!1,this.checkedID.splice(this.checkedID.indexOf(e.authSign),1)),this.FilterId(i)||i.isSelect&&(i.isSelect=!1,this.checkedID.splice(this.checkedID.indexOf(i.authSign),1))}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"role-table"},[i("el-row",{staticClass:"header"},[i("el-col",{staticClass:"left",attrs:{span:6}},[i("div",[t._v("菜单列表 ")])]),t._v(" "),i("el-col",{staticClass:"right",attrs:{span:18}},[i("div",[t._v("功能权限")])])],1),t._v(" "),t._l(t.dataList,function(e,n){return i("div",{key:e.id},[i("el-checkbox-group",{on:{change:t.handleChange},model:{value:t.checkedID,callback:function(e){t.checkedID=e},expression:"checkedID"}},["1"==e.authSign?i("el-row",[i("el-col",{staticClass:"left",attrs:{span:6}},[i("el-checkbox",{attrs:{label:e.authSign,disabled:""}},[t._v(" "+t._s(t.isMapName(e.level,e.authSign)))])],1),t._v(" "),i("el-col",{staticClass:"right",attrs:{span:18}},t._l(e.children[0].children,function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.authSign}},[t._v("\n            "+t._s(t.isMapName(e.level,e.authSign))+"\n          ")])}))],1):i("el-collapse",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-collapse-item",{attrs:{name:e.authSign}},[i("template",{slot:"title"},[i("div",{staticClass:"fir-title"},[i("el-checkbox",{attrs:{label:e.authSign},on:{change:function(i){t.checkFirstAll(e)}},model:{value:e.isSelect,callback:function(i){t.$set(e,"isSelect",i)},expression:"item.isSelect"}},[t._v(" "+t._s(t.isMapName(e.level,e.authSign)))])],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.children,expression:"item.children"}],staticClass:"second-ul"},t._l(e.children,function(n,a){return i("el-row",{key:n.id},[i("el-col",{staticClass:"left",attrs:{span:6}},[i("el-checkbox",{attrs:{label:n.authSign},on:{change:function(i){t.checkSecondAll(n,e)}},model:{value:n.isSelect,callback:function(e){t.$set(n,"isSelect",e)},expression:"second.isSelect"}},[t._v("\n                  "+t._s(t.isMapName(n.level,n.authSign))+"\n                ")])],1),t._v(" "),i("el-col",{staticClass:"right",attrs:{span:18}},t._l(n.children,function(a){return i("el-checkbox",{key:a.id,attrs:{disabled:t.checkboxInit(a.authSign),label:a.authSign},on:{change:function(i){t.checkthird(a,n,e)}},model:{value:a.isSelect,callback:function(e){t.$set(a,"isSelect",e)},expression:"p.isSelect"}},[t._v("\n                  "+t._s(t.isMapName(a.level,a.authSign))+"\n                ")])}))],1)}))],2)],1)],1)],1)})],2)},staticRenderFns:[]};var h=i("VU/8")(a,l,!1,function(t){i("e+Kp")},null,null).exports,c=i("RbPA"),r={name:"rolesAdd",components:{PermissionTree:h},data:function(){return{roleId:this.$route.query.roleId,roleForm:{roleName:"",merchant:"",checkedID:[]},dataList:[],merchantList:[],listLoading:!0,loading:!1}},created:function(){this.roleId?this.loadRolesUpateList(this.roleId):this.loadRolesList()},methods:{checkedID:function(t){this.roleForm.checkedID=t},loadRolesList:function(){var t=this;this.listLoading=!0,Object(c.d)().then(function(e){t.dataList=e.data.authList,t.merchantList=e.data.orgTypeList,t.listLoading=!1}).catch(function(){t.listLoading=!1})},loadRolesUpateList:function(t){var e=this;this.listLoading=!0,Object(c.e)(t).then(function(t){e.dataList=t.data.authList,e.merchantList=t.data.orgTypeList,e.merchantList.map(function(t){t.isSelected&&(e.roleForm.merchant=t.merchantTypeId)}),e.roleForm.roleName=t.data.roleName,e.listLoading=!1}).catch(function(){e.listLoading=!1})},onSave:function(){var t=this;this.roleForm.roleName&&this.roleForm.merchant&&this.roleForm.checkedID.length>0?(this.loading=!0,Object(c.a)(this.roleForm).then(function(e){t.loading=!1,t.$message({type:"success",message:"保存成功!"}),t.$router.push({name:"rolesList"})}).catch(function(){t.loading=!1})):this.$message("不可以为空")},onUpdate:function(){var t=this;this.roleForm.roleName&&this.roleForm.merchant&&this.roleForm.checkedID.length>0?(this.loading=!0,Object(c.f)(this.roleId,this.roleForm).then(function(e){t.loading=!1,t.$message({type:"success",message:"修改成功!"}),t.$router.push({name:"rolesList"})}).catch(function(){t.loading=!1})):this.$message("不可以为空")}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"third-header"},[i("router-link",{attrs:{to:{name:"rolesList"}}},[i("span",{staticClass:"backPrev"},[i("svg-icon",{attrs:{"icon-class":"back"}})],1)]),t._v(" "),t.roleId?i("span",[t._v("修改权限")]):i("span",[t._v("新增权限")])],1),t._v(" "),i("el-form",{ref:"roleForm",attrs:{model:t.roleForm,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"角色名称"}},[i("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:t.roleForm.roleName,callback:function(e){t.$set(t.roleForm,"roleName","string"==typeof e?e.trim():e)},expression:"roleForm.roleName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"角色权限"}},[i("permission-tree",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{dataList:t.dataList,border:"","element-loading-text":"Loading"},on:{checkedID:t.checkedID}})],1),t._v(" "),i("el-form-item",{attrs:{label:"角色机构"}},[i("el-select",{attrs:{placeholder:"请选择机构"},model:{value:t.roleForm.merchant,callback:function(e){t.$set(t.roleForm,"merchant",e)},expression:"roleForm.merchant"}},t._l(t.merchantList,function(t){return i("el-option",{key:t.merchantTypeId,attrs:{label:t.merchantTypeName,value:t.merchantTypeId}})}))],1),t._v(" "),i("el-form-item",[t.roleId?i("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onUpdate}},[t._v("修改")]):i("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onSave}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var s=i("VU/8")(r,u,!1,function(t){i("GFir")},"data-v-07b56251",null);e.default=s.exports},RbPA:function(t,e,i){"use strict";e.c=function(){return Object(n.a)({url:"role/load",method:"POST",data:{token:Object(a.a)()}})},e.b=function(t){return Object(n.a)({url:"role/delete",method:"post",data:{token:Object(a.a)(),roleId:t}})},e.d=function(){return Object(n.a)({url:"role/add/load",method:"post",data:{token:Object(a.a)()}})},e.e=function(t){return Object(n.a)({url:"role/update/load",method:"post",data:{token:Object(a.a)(),roleId:t}})},e.a=function(t){return Object(n.a)({url:"role/add",method:"post",data:{token:Object(a.a)(),roleName:t.roleName,merchantTypeId:t.merchant,authIds:t.checkedID}})},e.f=function(t,e){return Object(n.a)({url:"role/update",method:"post",data:{token:Object(a.a)(),roleId:t,roleName:e.roleName,merchantTypeId:e.merchant,authIds:e.checkedID}})};var n=i("vLgD"),a=i("TIfe")},ch0q:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.role-table {\n  border: 1px solid #e0e0e0;\n  border-bottom: none;\n  padding: 0;\n  position: relative;\n}\n.header {\n  height: 40px;\n  line-height: 40px;\n  background: #f8f8f9;\n  text-align: center;\n  border-bottom: 1px solid #ebeef5;\n}\n.el-collapse {\n  border-top: 1px solid #ebeef5;\n  border-bottom: none;\n}\n.el-collapse-item__content {\n  padding-bottom: 0;\n}\n.fir-title {\n  padding-left: 10px;\n}\n.left {\n  padding-left: 10px;\n  border-right: 1px solid #e7e7e7;\n}\n.right {\n  padding-left: 10px;\n}\n.second-ul .left {\n  padding-left: 35px;\n  line-height: 40px;\n  height: 40px;\n  border-top: 1px solid #ebeef5;\n}\n.second-ul .right {\n  line-height: 40px;\n  height: 40px;\n  border-top: 1px solid #ebeef5;\n}\n",""])},"e+Kp":function(t,e,i){var n=i("ch0q");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("1702d075",n,!0)},sxM7:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});