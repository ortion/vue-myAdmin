webpackJsonp([7],{FXQp:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Z98X"),i={name:"hotKeyword",data:function(){return{list:null,listLoading:!0,loading:!1,isShowDialog:!1,wordsForm:{name:"",id:""}}},created:function(){this.gethotKwordsList()},methods:{cancelEdit:function(t){t.wordText=t.originalTitle,t.edit=!1,this.wordsForm={name:""}},gethotKwordsList:function(){var t=this;this.listLoading=!0,Object(n.h)().then(function(e){if(e.data){var o=e.data;t.list=o.map(function(e){return t.$set(e,"edit",!1),e.originalTitle=e.wordText,e})}else t.list=[];t.listLoading=!1}).catch(function(){t.listLoading=!1})},submitWords:function(){var t=this;this.wordsForm.name?this.wordsForm.name.length>=15?this.$message({type:"warning",message:"热搜词字数超过最大长度"}):(this.loading=!0,Object(n.b)(this.wordsForm.name).then(function(){t.loading=!1,t.$message({message:"热搜词添加成功",type:"success"}),t.isShowDialog=!1,t.gethotKwordsList()}).catch(function(){t.loading=!1})):this.$message({type:"warning",message:"热搜词不能为空"})},updateWords:function(t){var e=this;t.wordText?t.wordText.length>=15?this.$message({type:"warning",message:"热搜词字数超过最大长度"}):(this.loading=!0,t.originalTitle=t.wordText,this.wordsForm.id=t.wordId,this.wordsForm.name=t.wordText,Object(n.l)(this.wordsForm).then(function(){e.loading=!1,e.$message({message:"修改成功",type:"success"}),t.edit=!1,e.wordsForm={name:""}}).catch(function(){e.loading=!1})):this.$message({type:"warning",message:"热搜词不能为空"})},deleteWords:function(t){var e=this;Object(n.d)(t.wordId).then(function(){e.$message({message:"删除成功",type:"success"}),e.gethotKwordsList()})},moveWords:function(t,e){var o=this;if("up"===e){if(1===t.id)return;Object(n.j)(t.wordId).then(function(){o.gethotKwordsList()})}else if("down"===e){if(t.id===this.list.length)return;Object(n.f)(t.wordId).then(function(){o.gethotKwordsList()})}},isClose:function(){this.wordsForm={name:""}}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("div",{staticClass:"filter-container"},[o("el-row",{attrs:{type:"flex",justify:"space-between"}},[o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"line-height":"32px"}},[t._v("热门搜索管理")])]),t._v(" "),o("el-col",{attrs:{span:12}},[o("div",{staticStyle:{"text-align":"right"}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.isShowDialog=!0}}},[t._v("添加热门搜索词")])],1)])],1)],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.$index+1)+"\n      ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"热搜词",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.edit?[o("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:e.row.wordText,callback:function(o){t.$set(e.row,"wordText","string"==typeof o?o.trim():o)},expression:"scope.row.wordText"}}),t._v(" "),o("el-button",{staticClass:"cancel-btn",attrs:{size:"small",type:"warning"},on:{click:function(o){t.cancelEdit(e.row)}}},[t._v("取消")])]:o("span",[t._v(t._s(e.row.wordText))])]}}])}),t._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticStyle:{"text-align":"left"}},[e.row.edit?o("el-button",{attrs:{loading:t.loading,size:"mini",type:"danger",plain:""},on:{click:function(o){t.updateWords(e.row)}}},[t._v("保存")]):o("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){e.row.edit=!e.row.edit}}},[t._v("修改")]),t._v(" "),o("el-button",{attrs:{disabled:1==e.row.id,size:"mini",type:"success",plain:""},on:{click:function(o){t.moveWords(e.row,"up")}}},[t._v("上移")]),t._v(" "),o("el-button",{attrs:{disabled:e.row.id==t.list.length,size:"mini",type:"success",plain:""},on:{click:function(o){t.moveWords(e.row,"down")}}},[t._v("下移")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(o){t.deleteWords(e.row)}}},[t._v("删除")])],1)]}}])})],1),t._v(" "),o("el-dialog",{attrs:{title:"增加热搜词",visible:t.isShowDialog,"show-close":!1,width:"400px",center:""},on:{close:t.isClose,"update:visible":function(e){t.isShowDialog=e}}},[o("el-form",{attrs:{model:t.wordsForm,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"热搜词"}},[o("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入热搜词"},model:{value:t.wordsForm.name,callback:function(e){t.$set(t.wordsForm,"name","string"==typeof e?e.trim():e)},expression:"wordsForm.name"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.isShowDialog=!1}}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){e.preventDefault(),t.submitWords(e)}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var r=o("VU/8")(i,a,!1,function(t){o("kb7b")},"data-v-5742ecb0",null);e.default=r.exports},Z98X:function(t,e,o){"use strict";e.g=function(){return Object(n.a)({url:"app/hotcity/load",method:"POST",data:{token:Object(i.a)()}})},e.a=function(t){return Object(n.a)({url:"app/hotcity/add",method:"POST",data:{token:Object(i.a)(),cityName:t}})},e.c=function(t){return Object(n.a)({url:"app/hotcity/delete",method:"POST",data:{token:Object(i.a)(),cityId:t}})},e.k=function(t){return Object(n.a)({url:"app/hotcity/update",method:"POST",data:{token:Object(i.a)(),cityId:t.id,cityName:t.name}})},e.i=function(t){return Object(n.a)({url:"app/hotcity/mvup",method:"POST",data:{token:Object(i.a)(),cityId:t}})},e.e=function(t){return Object(n.a)({url:"app/hotcity/mvdown",method:"POST",data:{token:Object(i.a)(),cityId:t}})},e.h=function(){return Object(n.a)({url:"app/hotword/load",method:"POST",data:{token:Object(i.a)()}})},e.b=function(t){return Object(n.a)({url:"app/hotword/add",method:"POST",data:{token:Object(i.a)(),wordText:t}})},e.d=function(t){return Object(n.a)({url:"app/hotword/delete",method:"POST",data:{token:Object(i.a)(),wordId:t}})},e.l=function(t){return Object(n.a)({url:"app/hotword/update",method:"POST",data:{token:Object(i.a)(),wordId:t.id,wordText:t.name}})},e.j=function(t){return Object(n.a)({url:"app/hotword/mvup",method:"POST",data:{token:Object(i.a)(),wordId:t}})},e.f=function(t){return Object(n.a)({url:"app/hotword/mvdown",method:"POST",data:{token:Object(i.a)(),wordId:t}})};var n=o("vLgD"),i=o("TIfe")},kb7b:function(t,e,o){var n=o("yQG0");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o("rjj0")("7c731a81",n,!0)},yQG0:function(t,e,o){(t.exports=o("FZ+f")(!1)).push([t.i,"",""])}});